---
layout: null
---
<configuration>
	<system.webServer>
		<staticContent>
			<remove fileExtension=".html" />
			<mimeMap fileExtension=".html" mimeType="text/html; charset=utf-8" />
			<remove fileExtension=".xml" />
			<mimeMap fileExtension=".xml" mimeType="text/xml; charset=utf-8" />
			<remove fileExtension=".woff2" />
			<mimeMap fileExtension=".woff2" mimeType="font/woff2" />
			<remove fileExtension=".7z" />
			<mimeMap fileExtension=".7z" mimeType="application/x-7z-compressed" />
		</staticContent>
		<rewrite>
			<rules>
				<rule name="HTTPS redirect" stopProcessing="true">
					<conditions>
						<add input="{HTTPS}" pattern="^OFF$" />
					</conditions>
					<action type="Redirect" redirectType="Permanent" url="https://{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" />
				</rule>
				<rule name="domains redirect" stopProcessing="true">
					<match url="(.*)" />
					<conditions>
						<add input="{HTTP_HOST}" pattern="^www\.tabsoverspaces\.com$" negate="true" />
					</conditions>
					<action type="Redirect" redirectType="Permanent" url="https://www.tabsoverspaces.com/{R:1}?utm_source={HTTP_HOST}" appendQueryString="true" />
				</rule>
				
				<!-- permalinks -->
				{% for post in site.posts %}
				{% capture permalink %}{% include permalink.txt post=post %}{% endcapture %}
				{% assign redirect_link = permalink | remove_first: "/" | append: "?" %}<!-- trailing slash optional -->
				<rule name="Redirect ID: {{ redirect_link }}" stopProcessing="true">
					<match url="^{{ redirect_link }}$" />
					<action type="Redirect" redirectType="Permanent" url="{{ site.protocol }}{{ site.address }}{{ post.url }}" appendQueryString="true" />
				</rule>
				{% endfor %}
				<!-- permalinks end -->
			</rules>
			<outboundRules>
				<rule name="HSTS" enabled="true">
					<match serverVariable="RESPONSE_Strict_Transport_Security" pattern=".*" />
					<conditions>
						<add input="{HTTPS}" pattern="^ON$" />
					</conditions>
					<action type="Rewrite" value="max-age=31536000" />
				</rule>
				<rule name="Caching" enabled="true">
					<match serverVariable="RESPONSE_Cache_Control" pattern=".*" />
					<conditions>
						<add input="{RESPONSE_STATUS}" pattern="^200$" />
					</conditions>
					<action type="Rewrite" value="public, max-age=86400" />
				</rule>
			</outboundRules>
		</rewrite>
		<httpErrors>
			<remove statusCode="404" />
			<error statusCode="404" path="404.html" responseMode="File" />
		</httpErrors>
	</system.webServer>
</configuration>