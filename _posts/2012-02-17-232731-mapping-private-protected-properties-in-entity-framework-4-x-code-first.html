---
title: "Mapping private/protected/... properties in Entity Framework 4.x Code First"
date: 2012-02-17T13:07:34Z
tags:
  - Entity Framework
category: none
layout: post
---
<p>More than a year ago I was blogging about <a href="{{ site.url }}{% post_url 2010-11-04-232147-mapping-private-or-protected-properties-with-code-first-efv4-ctp4 %}">how to map private/protected/... properties in Code First CTP4</a> for the time being. Well it a long time and a lot of changed. The code there isn't absolutely up to date with current <a href="http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx">Entity Framework 4.3</a>.</p> 

<p>Although you can go raw and create the expression tree from i.e. string yourself (<a href="http://nuget.org/packages/Mono.Linq.Expressions">Mono.Linq.Expressions</a> can be quite handy) it's not nice and more importantly it's not strongly typed. If you don't want to use data annotations or couple your configuration classes into entity classes you're still not lost. In the above linked post <a href="//blog.cincura.net/id/232147/#comment-5376">in comments <i>Drew Jones</i></a> came with a nice idea.</p>

<p>You entity classes will be partial classes and somewhere else you'll create second part of that class with the expressions needed to express the properties. Let's take a look at example (you can adjust access modifiers according to your needs and structure).</p>

<pre class="brush:csharp">
public partial class FooBar
{
	private int ID { get; set; }
	private string Something { get; set; }
}

public partial class FooBar
{
	public class PropertyAccessExpressions
	{
		public static readonly Expression&lt;Func&lt;FooBar, int&gt;&gt; ID = x =&gt; x.ID;
		public static readonly Expression&lt;Func&lt;FooBar, string&gt;&gt; Something = x =&gt; x.Something;
	}
}
</pre>

<p>And now in mapping you'll just use the expressions.</p>

<pre class="brush:csharp">
	.Property(FooBar.PropertyAccessExpressions.ID);
	.Property(FooBar.PropertyAccessExpressions.Something);
</pre>

<p>Nice isn't it? It's separated (kind of - you can't have entity classes in one assembly and the expressions in other) and it's strongly typed.</p>
