---
title: "Using database initializers with EDMX"
date: 2011-11-21T18:02:42Z
tags:
  - Entity Framework
category: none
layout: post
---
<p>Last week at my Entity Framework training I got a question whether you can use database initializer while still using EDMX file. The answer, as it turned out, isn't that straightforward.</p>

<p>Directly you can't. Because you need <a href="http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext(v=vs.103).aspx">DbContext</a> to create <a href="http://msdn.microsoft.com/en-us/library/gg696323(v=vs.103).aspx">IDatabaseInitializer&lt;T&gt;</a> (or to derive from default ones respectively). Even if you try to wrap <a href="http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx">ObjectContext</a> into <code>DbContext</code> you'll fail. The default objects are derived from <a href="http://msdn.microsoft.com/en-us/library/system.data.objects.dataclasses.entityobject.aspx">EntityObject</a>s and this is something that's a showstopper for <code>DbContext</code>. So that's a bad news.</p>

<p>On the other hand, there's a good news, kind of. There's a template (from Microsoft) to generate <code>DbContext</code> and classes from EDMX file.</p>
<p><img src="http://i.blog.cincura.net/dbcontext_t4_template_item.png" /></p>
<p>With this template you will get all you need to start using database initializers. Only problem is, that you don't have configurations generated from EDMX. But there's also 3<sup>rd</sup> template, that can generate configurations (I haven't tested it exhaustively).</p>

<p>Final answer? Yes you can, but it's not smooth as it could be.</p>