---
title: "Cancel CancellationTokenSource after a timeout"
date: 2013-01-24T09:26:20Z
tags:
  - Multithreading/Parallelism/Asynchronous/Concurrency
category: none
layout: post
---
<p>Maybe you already discovered it. But in .NET 4.5 the <a href="http://msdn.microsoft.com/en-us/library/dd321629.aspx"><code>CancellationTokenSource</code></a> class has a new method <a href="http://msdn.microsoft.com/en-us/library/hh194678.aspx"><code>CancelAfter</code></a>. It allows you to signal cancellation after a specified interval aka timeout.</p> 
<!-- excerpt -->
<p>In .NET 4 you'd have to <a href="http://msdn.microsoft.com/en-us/library/dd235604.aspx"><code>Wait</code></a> on a <a href="http://msdn.microsoft.com/en-us/library/dd235678.aspx"><code>Task</code></a> to complete or not and if not, do the cancellation. This might go little bit off control if you have a bunch of tasks. In .NET 4.5 a handy <a href="http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay.aspx"><code>Task.Delay</code></a> was added and with <code>await</code>/<code>async</code> it was easier. But still.</p> 

<p>Setting a timeout and basically forgetting about it is a nice little help, that will make the code little more clean and easier to comprehend.</p> 
