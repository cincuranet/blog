---
title: "Switching from one CPU to more CPUs on XP"
date: 2010-01-02T19:34:11Z
tags:
  - Virtualization
  - Windows
category: none
layout: post
---
<p>As I recently <a href="{{ site.url }}{% post_url 2009-11-05-231004-virtual-pc-vmware-workstation %}">switched from Virtual PC to VMWare Workstation</a> I wanted to upgrade my VMs to be able to use all cores I have and I granted. Machines I'm using most are Windows XPs and Windows 7. As the <a href="{{ site.url }}{% post_url 2009-11-05-231004-virtual-pc-vmware-workstation %}">Windows 7 migration failed</a> and I'm still about to install fresh W7 RTM, the challenge was XP.</p> 

<p>Couple of hints I found on internet and as replies to <a href="http://konference.vyvojar.cz/post.aspx?id=211460">my question in mailing list</a> but nothing was working or it was screwing the system. But then I found <a href="http://handaware.com/multiprocessor_XP.html">a great document</a>, with the manual, forced, way of switching. Although the document recommends doing the surgery in safe mode, I did it in live system (vivat snapshots) once, with just raw copy (+overwrite) and it worked.</p> 

<pre class="brush:plain">
copy C:WindowsServicePackFilesi386halmacpi.dll C:Windowssystem32HAL.DLL
copy C:WindowsServicePackFilesi386ntkrnlmp.exe C:Windowssystem32ntoskrnl.exe
copy C:WindowsServicePackFilesi386ntkrpamp.exe C:Windowssystem32ntkrnlpa.exe
</pre>

<p>Anyway, on real important system I would recommend safe mode too. After reboot the system detected new hardware, installed it and after another reboot I was ready to make the cores screaming.</p>
