---
title: "Examples for \"(Not) interesting observation on LINQ\""
date: 2009-05-03T11:06:00Z
tags:
  - LINQ
category: devel
layout: post
---
<p>After the post <a href="{% post_url 2009-04-11-229357-not-interesting-observation-on-linq %}">(Not) interesting observation on LINQ</a> was out <a href="http://blog.vyvojar.cz/michal/" >Michal Blaha</a> asked me to show some example to show what I’m talking about. :) </p>

<p>OK, here it is. This example shows the first observation from second paragraph (yep, it’s second ;)). I’m using only Where, for the sake of simplicity. </p>
<pre class="brush:csharp">
class Program
{
    static void Main(string[] args)
    {
        Class1 a = new Class1();
        var q = from x in a
                where x.Foo &gt; 20
                select new { Bar = x.Foo };
    }
}

class Class1
{
    public int Foo { get; set; }

    public IEnumerable&lt;Class1&gt; Where(Func&lt;Class1, bool&gt; predicate)
    {
        return new[] { this };
    }
}
</pre>
<p>No IQueryable, no querying provider stuff, etc. Compiles without problems, and runs without complaining. No magic, right? </p>

<p>Now the third (last) paragraph. </p>
<pre class="brush:csharp">
class Program
{
    static void Main(string[] args)
    {
        Class1 a = new Class1();
        var q = from x in a
                where x.Foo &gt; 20
                select new { Bar = x.Bar };
    }
}

class Class1
{
    public int Foo { get; set; }

    public IEnumerable&lt;Class2&gt; Where(Func&lt;Class1, bool&gt; predicate)
    {
        return new[] { new Class2() };
    }
}

class Class2
{
    public int Bar { get; set; }
}
</pre>
<p>The example is magically returning from Where IEnumerable of other class. :) Doing this with couple of standard LINQ operators may confuse your colleagues well. You can also check the "LINQ to Simpsons" from <a href="http://community.bartdesmet.net/blogs/bart/Default.aspx">Bart de Smet</a> to see comprehensive confusing.</p>
