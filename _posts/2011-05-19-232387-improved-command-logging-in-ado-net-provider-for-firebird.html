---
title: "Improved command logging in ADO.NET provider for Firebird"
date: 2011-05-19T18:34:30Z
tags:
  - .NET
  - Firebird
  - Logging &amp; Tracing
category: none
layout: post
---
<p>I recently improved the command logging in <a href="http://www.firebirdsql.org/index.php?op=files&id=netprovider">ADO.NET provider for Firebird</a>. Let me start with little bit of history and then you'll see the motivation and current improvements.</p>

<p>Before I added simple <code>Debug.WriteLine</code> to the <code>FbCommand</code> class. This was mainly driven with need to easily see commands I was <a href="{{ site.url }}{% post_url 2009-05-22-230290-ann-firebirdclient-2-5-final-released %}">generating for Entity Framework</a>. Then the <a href="http://www.microsoft.com/visualstudio/en-us/products/2010-editions">Visual Studio 2010</a> came with the <a href="http://msdn.microsoft.com/en-us/library/dd264915.aspx">IntelliTrace</a> (only Ultimate version) and while working with MS SQL Server I was happy to see commands without any additional effort. I wanted the same for <a href="http://www.firebirdsql.org">Firebird</a> too. Sadly the IntelliTrace right now isn't publicly pluggable. I was still using the debugging code, but often when doing development on customer's applications using released version of provider I lost this ability. No debug outputs, no IntelliTrace.</p>

<p>Because I believe it's important to have easy way to see (and not only for Entity Framework's generated) the command, to spot performance problems early, I added simple logging facility. This logging is enabled for all builds (not only debug) and uses <a href="http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx">Trace class</a> from <a href="http://www.microsoft.com/net/">.NET Framework</a>. Everytime you <code>Prepare</code> (the <code>Prepare</code> method is called also automatically before execute if not called manually) command you'll see the command text and current parameter names and values (if any). If you're inside Visual Studio you see by default the output in <code>Output</code> window. You can also <a href="http://msdn.microsoft.com/en-us/library/ms733025.aspx">configure it</a> to log i.e. to file, probably usable in staging and/or production.</p>

<p>Hope you find this useful as I do.</p>
